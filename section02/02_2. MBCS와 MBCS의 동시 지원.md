# **제2강\_1: MBCS와 WBCS의 동시 지원**

### 📌 **MBCS와 WCS를 동시에 지원하는 프로그래밍 방법은?**

윈도우즈에서 제공하는 다양한 매크로를 활용하여 \_UNICODE 매크로의 정의 여부에 따라 MBCS 또는 WCS 기반으로 컴파일되도록 구현하는 것이다.

💡 **동시 지원을 위해 활용되는 주요 매크로는?**

- \_UNICODE: 정의 여부에 따라 문자열 및 함수 호출 방식 변경이다.
- \_T(): 문자열 앞에 L을 붙여 와이드 문자열로 처리한다.
- \_tmain, \_tprintf 등: \_UNICODE 정의 여부에 따라 wmain, wprintf 등으로 변경한다.

---

## 목차

1. 🗂️ MBCS와 유니코드의 동시 지원의 필요성
2. 🖥️ 윈도우즈 자료형 정의와 개발자 편의성
3. 📜 MBCS와 WBCS의 동시 지원을 위한 유니코드 선언
4. 🎯 언더바 유니코드와 문자열 처리 방식
5. 🖥️ MBCS와 WBCS의 동시 지원 프로그래밍 방법

---

# 1. 🗂️ MBCS와 유니코드의 동시 지원의 필요성

- 유니코드 기반 개발만으로 기존 시스템과의 호환성 문제로 인해 모든 소프트웨어를 통일하기 어렵다.

- 프로그램을 MBCS 기반과 유니코드 기반으로 동시에 지원하는 것이 유지보수의 어려움을 줄이고 개발자에게 유리하다.

# 2. 🖥️ 윈도우즈 자료형 정의와 개발자 편의성

1. **윈도우즈 시스템 프로그래밍**에서 사용되는 다양한 자료형 정의가 존재한다.
2. 자료형 정의에는 **대문자 캐릭터, 와이드 캐릭터 타입, 문자열** 등이 포함되어 있고, 이름 지정을 통해 변수의 특성을 추상화하고 있다.
3. 프로젝트에 따라 자료형의 네이밍은 달라질 수 있고, **중복된 네이밍** 대신 별도의 이름을 사용할수 있다.
4. **캐릭터 포인터 타입**을 많이 사용한 저자의 경함과 더불어, 개발자들이 개인의 취향에 따라 자료형 정의를 변경할 수 있음이 강조한다.

# 3. 📜 MBCS와 WBCS의 동시 지원을 위한 유니코드 선언

1. MBCS와 WCS의 동시 지원은 **유니코드**라는 매크로를 통해 이루어진다.
2. windows.h 헤더 파일은 유니코드 선언을 포함하고 있고, 유니코드는 키워드가 아닌 미리 정의된 값으로 처리된다.
3. 유니코드가 선언되고, t 캐릭터는 **와이드 캐릭터**로 변환, 그렇지 않으면 아스키 코드 문자를 표현하는 캐릭터로 변형된다.
4. 문자열 선언 시 L을 붙이면 유니코드가 적용된 문자열로 처리, 매크로를 사용하면 문자 표현이 적절하게 변경된다.

# 4. 🎯 언더바 유니코드와 문자열 처리 방식

1. **언더바 유니코드**가 붙은 단어는 특정 형태로 변형되고, 붙지 않은 경우에 다른 형태로 변환된다.
2. 조건부 컴파일이 아닌, 무조건적인 변환이 필요한 경우 두 방식이 동일하다.
3. 언더바 T와 같은 선언이 매크로의 정의 여부에 따라 변환되어 처리, 매크로가 정의되어 있지 않고 단순 문자열로 나타난다.
4. 유니코드 매크로가 정의되면 문자열은 유니코드 형식으로 해석되어 매크로의 정의에 따라 문자열 해석의 방식이 다를 수 있다.

# 🖥️ MBCS와 WBCS의 동시 지원 프로그래밍 방법

1. **사이즈 연산**을 통해 문자열의 길이를 계산할 때, 문자열 길이가 7인 경우 null 문자를 포함해 8이 되고, 이를 두 배로 곱해 16이 출력된다.
2. **유니코드**처리되는 문자열 지원을 위해 MBCS와 WBCS에서 각각 사용하는 함수가 다르다.
